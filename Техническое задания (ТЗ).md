–í–æ—Ç –ø—Ä–∏–º–µ—Ä **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è (–¢–ó)** –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Kafka, –ø–∞—Ç—Ç–µ—Ä–Ω–∞ SAGA –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ Outbox**, –≤ —Ä–∞–º–∫–∞—Ö —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –∫—Ä–µ–¥–∏—Ç:

---

### üìÑ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –∫—Ä–µ–¥–∏—Ç**

#### **–¶–µ–ª—å —Å–∏—Å—Ç–µ–º—ã**
–û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥—ë–∂–Ω—É—é, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—É—é –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞—è–≤–∫–∏ –Ω–∞ –∫—Ä–µ–¥–∏—Ç –æ—Ç –º–æ–º–µ–Ω—Ç–∞ –ø–æ–¥–∞—á–∏ –¥–æ –≤—ã–¥–∞—á–∏ —Å—Ä–µ–¥—Å—Ç–≤ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–æ–º, —Å–æ–±–ª—é–¥–∞—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –Ω–æ—Ä–º—ã –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞—É–¥–∏—Ç—É, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.

–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–±–æ–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–±—ã—Ç–∏–π –¥–∞–∂–µ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—è—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.

---

### **1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ **Kafka**.
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ **SAGA-–ø–∞—Ç—Ç–µ—Ä–Ω** (Orchestration-based).
- **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Transactional Outbox Pattern** –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –ë–î.
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ**: –≤—Å–µ –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω—ã–µ –≤—ã–∑–æ–≤—ã ‚Äî —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è –≤ Kafka.
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ —Å–±–æ—è—Ö.

---

### **2. –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —Å–∏—Å—Ç–µ–º—ã**
1. **CreditApplicationService** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞—è–≤–∫–∏.
2. **CustomerVerificationService** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ (–¥–∞–Ω–Ω—ã–µ, –ß–°, –ø–∞—Å–ø–æ—Ä—Ç –∏ —Ç.–¥.).
3. **ScoringService** ‚Äî –∞–Ω–∞–ª–∏–∑ –ø–ª–∞—Ç—ë–∂–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∑–∞–ø—Ä–æ—Å –≤ –ë–ö–ò, –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è.
4. **PaymentService** ‚Äî —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è –∏ –≤—ã–¥–∞—á–∞ —Å—Ä–µ–¥—Å—Ç–≤.
5. **NotificationService** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç—É.
6. **LoanManagementService** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤—É—é—â–∏–º –∫—Ä–µ–¥–∏—Ç–æ–º (–≥—Ä–∞—Ñ–∏–∫, –ø–æ–≥–∞—à–µ–Ω–∏–µ, –∫–∞–Ω–∏–∫—É–ª—ã –∏ —Ç.–¥.).

---

### **3. –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–∫–∏ (SAGA Orchestration)**

**–®–∞–≥–∏ SAGA:**

| ‚Ññ | –®–∞–≥ | –î–µ–π—Å—Ç–≤–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –¶–µ–ª—å | –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ |
|----|------|--------|--------|--------|------------------------|
| 1 | `CreateCreditApplication` | –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∞—ë—Ç –∑–∞—è–≤–∫—É | UI ‚Üí Kafka (`credit.applications.created`) | `CreditApplicationService` | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ (–µ—Å–ª–∏ –Ω–µ –Ω–∞—á–∞—Ç–∞) |
| 2 | `VerifyCustomer` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞: –¥–∞–Ω–Ω—ã–µ, –ß–°, REST-–≤—ã–∑–æ–≤ –≤ `CustomerVerificationService` | `CreditApplicationService` ‚Üí `CustomerVerificationService` | `customer.verification.requested` | `customer.verification.failed` |
| 3 | `RunScoring` | –†–∞—Å—á—ë—Ç —Å–∫–æ—Ä–∏–Ω–≥–∞: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–Ω–∞–ª–∏–∑ + –≤—ã–∑–æ–≤ –ë–ö–ò —á–µ—Ä–µ–∑ `ScoringService` | `CreditApplicationService` ‚Üí `ScoringService` | `scoring.requested` | `scoring.rejected` |
| 4 | `ReserveFunds` | –†–µ–∑–µ—Ä–≤ —Å—Ä–µ–¥—Å—Ç–≤ –≤ `PaymentService` | `CreditApplicationService` ‚Üí `PaymentService` | `funds.reservation.requested` | `funds.reservation.cancelled` |
| 5 | `SendNotification` | –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É | `CreditApplicationService` ‚Üí `NotificationService` | `notification.requested` | –ù–µ—Ç (–ª–æ–≥–≥–∏—Ä—É–µ—Ç—Å—è) |
| 6 | `ActivateLoan` | –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫—Ä–µ–¥–∏—Ç–∞, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `LoanManagementService` | `CreditApplicationService` ‚Üí `LoanManagementService` | `loan.created` | `loan.cancelled` |

> ‚ö†Ô∏è –ï—Å–ª–∏ –Ω–∞ –ª—é–±–æ–º —à–∞–≥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∞—è SAGA**, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏.

---

### **4. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

#### ‚úÖ **1. Transactional Outbox Pattern**
- –í `CreditApplicationService` –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –≤ –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, PostgreSQL) **—Å–æ–±—ã—Ç–∏–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `CreditApplicationCreatedEvent`) **–¥–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ —Ç—É –∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é**.
- –°–æ–±—ã—Ç–∏–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `outbox_events` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `id`, `aggregate_type`, `aggregate_id`, `event_type`, `payload`, `created_at`, `processed_at`, `kafka_topic`).
- **Debezium –∏–ª–∏ —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `OutboxPoller`) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–∑ `outbox_events` –≤ Kafka –∏ –ø–æ–º–µ—á–∞–µ—Ç –∏—Ö –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ.
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ —Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ **–Ω–µ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞** (idempotency) –∏ **–Ω–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è**.

#### ‚úÖ **2. SAGA Orchestrator**
- `CreditApplicationService` —Å–æ–¥–µ—Ä–∂–∏—Ç **SAGA Orchestrator** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ Spring State Machine –∏–ª–∏ –≤—Ä—É—á–Ω—É—é).
- Orchestrator:
    - –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏–∑ Kafka.
    - –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏.
    - –ü—Ä–∏ –æ—à–∏–±–∫–µ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç **–∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–º–µ–Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤).
    - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ SAGA (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Redis –∏–ª–∏ –ë–î).

#### ‚úÖ **3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤**
- –í—ã–∑–æ–≤ `CustomerVerificationService` ‚Äî **REST**, –Ω–æ —Å —Ç–∞–π–º–∞—É—Ç–æ–º –∏ retry-–ª–æ–≥–∏–∫–æ–π.
- –û—Ç–≤–µ—Ç –æ—Ç `CustomerVerificationService` –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Kafka (`customer.verification.completed`).
- `ScoringService` –¥–µ–ª–∞–µ—Ç –≤—ã–∑–æ–≤ –≤ –ë–ö–ò ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π REST, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î.
- –í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äî —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è –≤ Kafka.

#### ‚úÖ **4. Idempotency & Retry**
- –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏**.
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ —Å–±–æ—è) –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è.
- –ü—Ä–∏–º–µ—Ä: `funds.reservation.requested` ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –Ω–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ —É–∂–µ —Å—Ä–µ–¥—Å—Ç–≤–∞.

#### ‚úÖ **5. –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ `CreditApplicationService` SAGA –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∏–∑ –ë–î.
- Kafka –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–±—ã—Ç–∏–π (—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è, acks=all).
- Outbox-–ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.

#### ‚úÖ **6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –ö–∞–∂–¥—ã–π —à–∞–≥ SAGA –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (—Å–æ–±—ã—Ç–∏–µ, —Å—Ç–∞—Ç—É—Å, –≤—Ä–µ–º—è).
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **OpenTelemetry** –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞.
- –ú–µ—Ç—Ä–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö/–æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–π.

---

### **5. –ü—Ä–∏–º–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π –≤ Kafka**

```json
// –ü—Ä–∏–º–µ—Ä: credit.applications.created
{
  "event_type": "CREDIT_APPLICATION_CREATED",
  "application_id": "app-123",
  "customer_id": "cust-456",
  "amount": 500000,
  "term_months": 24,
  "timestamp": "2025-04-05T10:00:00Z"
}

// –ü—Ä–∏–º–µ—Ä: customer.verification.completed
{
  "event_type": "CUSTOMER_VERIFICATION_COMPLETED",
  "application_id": "app-123",
  "status": "APPROVED",
  "blacklist_check": "PASSED",
  "passport_valid": true
}

// –ü—Ä–∏–º–µ—Ä: scoring.rejected
{
  "event_type": "SCORING_REJECTED",
  "application_id": "app-123",
  "reason": "HIGH_DEBT_TO_INCOME_RATIO",
  "score": 420
}
```

---

### **6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏**

**–ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è:**
1. –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ ‚Üí –∫–ª–∏–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω ‚Üí —Å–∫–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–µ–Ω ‚Üí —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã.
2. –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
3. SAGA Orchestrator:
    - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `loan.cancelled` ‚Üí `LoanManagementService`.
    - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `funds.reservation.cancelled` ‚Üí `PaymentService`.
    - –ó–∞—è–≤–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `REJECTED`.

---

### **7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LoanManagementService**
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≤—ã–¥–∞—á–∏ –∫—Ä–µ–¥–∏—Ç–∞ `CreditApplicationService` –ø—É–±–ª–∏–∫—É–µ—Ç `loan.created`.
- `LoanManagementService` —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å –æ –∫—Ä–µ–¥–∏—Ç–µ.
- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
    - –î–æ—Å—Ä–æ—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ
    - –ö—Ä–µ–¥–∏—Ç–Ω—ã–µ –∫–∞–Ω–∏–∫—É–ª—ã
    - –ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
    - –ü–µ—Ä–µ—Å—á—ë—Ç —É—Å–ª–æ–≤–∏–π

> –≠—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è ‚Äî **—É–∂–µ –≤–Ω–µ SAGA**, –Ω–æ —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `loan.repayment.requested`).

---

### **8. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è ‚Äî —Å —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–¥–ø–∏—Å—å—é –∏–ª–∏ JWT (–µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ).
- TLS –¥–ª—è Kafka –∏ REST.
- –ê—É–¥–∏—Ç –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π (–ª–æ–≥–∏ + –∞—Ä—Ö–∏–≤–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π).

---

### **9. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫**
- **–Ø–∑—ã–∫**: Java (Spring Boot) –∏–ª–∏ Kotlin
- **–ë–î**: PostgreSQL
- **Kafka**: Apache Kafka (Confluent)
- **Kafka Clients**: Spring Kafka
- **ORM**: JPA / Hibernate
- **SAGA**: Spring State Machine –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π Orchestrator
- **Outbox**: Debezium –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `OutboxPoller`
- **REST**: Spring Web
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus, Grafana, OpenTelemetry
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Testcontainers, Kafka Test, Mockito

---

### **10. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**
1. –£—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–∫–∏ (–≤—Å–µ —à–∞–≥–∏ –ø—Ä–æ–π–¥–µ–Ω—ã).
2. –û—à–∏–±–∫–∞ –Ω–∞ —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí –æ—Ç–∫–∞—Ç.
3. –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤ ‚Üí –æ—Ç–º–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —à–∞–≥–æ–≤.
4. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è ‚Üí –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.
5. –ü–∞–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ SAGA ‚Üí –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

---

### **11. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **—Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞** (–µ—Å–ª–∏ —Å–∫–æ—Ä–∏–Ω–≥ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–µ–Ω):
    - –°–æ–±—ã—Ç–∏–µ `scoring.pending.manual.review` ‚Üí UI –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.
    - –û–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ ‚Üí —Å–æ–±—ã—Ç–∏–µ `scoring.manual.approved/rejected`.

---

### **12. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –∑–∞—è–≤–æ–∫.
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ **Transactional Outbox**.
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ **SAGA**.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ —á–µ—Ä–µ–∑ Kafka.

---

> ‚úÖ **–ü–æ–¥–ø–∏—Å—å –∑–∞–∫–∞–∑—á–∏–∫–∞**:  
> [–ò–º—è, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, –¥–∞—Ç–∞]  
> *–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è, 2025*

--- 

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –º–æ–≥—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å **–¥–∏–∞–≥—Ä–∞–º–º—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**, **ERD –¥–ª—è Outbox**, **–ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ Spring Boot** –∏–ª–∏ **—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é SAGA Orchestrator**.